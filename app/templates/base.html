<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

  <!-- SimpleDatatables CSS -->
  <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('main-content');
      const toggleSidebarBtn = document.getElementById('toggle-sidebar');
      const collapseStates = JSON.parse(localStorage.getItem('collapseStates')) || {};
      let sidebarState;

      // Retrieve sidebar state from localStorage
      if (localStorage.getItem('sidebarState') === 'hidden') {
        sidebarState = 'hidden';
      } else {
        sidebarState = 'visible';
      }

      // Si no hay un estado previamente guardado, ocultar la barra lateral en pantallas peque√±as
      if (!sidebarState && window.innerWidth <= 567) {
        sidebarState = 'hidden';
      }

      // Set initial collapse states for acordeons
      for (const collapseId in collapseStates) {
        if (Object.prototype.hasOwnProperty.call(collapseStates, collapseId)) {
          const collapse = document.getElementById(collapseId);
          if (collapse && collapseStates[collapseId]) {
            collapse.classList.add('show');
          }
        }
      }


      // Toggle sidebar visibility based on stored state
      if (sidebarState === 'hidden') {
        sidebar.classList.add('d-none');
        mainContent.classList.remove('col');
        mainContent.classList.add('col-12');
      } else {
        sidebar.classList.remove('d-none');
        mainContent.classList.remove('col-12');
        mainContent.classList.add('col');
      }

      // Toggle sidebar visibility
      toggleSidebarBtn.addEventListener('click', function () {
        if (sidebar.classList.contains('d-none')) {
          sidebar.classList.remove('d-none');
          mainContent.classList.remove('col-12');
          mainContent.classList.add('col');
          localStorage.setItem('sidebarState', 'visible');
        } else {
          sidebar.classList.add('d-none');
          mainContent.classList.remove('col');
          mainContent.classList.add('col-12');
          localStorage.setItem('sidebarState', 'hidden');
        }
      });

      // Save collapse states on toggle
      const accordionItems = document.querySelectorAll('.accordion-item');
      accordionItems.forEach(item => {
        item.addEventListener('click', function () {
          const collapseId = this.querySelector('.accordion-collapse').id;
          const isExpanded = this.querySelector('.accordion-collapse').classList.contains('show');
          collapseStates[collapseId] = isExpanded;
          localStorage.setItem('collapseStates', JSON.stringify(collapseStates));
        });
      });

      // Toggle dark mode
      const darkModeToggleBtn = document.getElementById('dark-mode-toggle');
      const body = document.body;

      darkModeToggleBtn.addEventListener('click', function () {
        body.classList.toggle('dark-mode');
      });
    });

  </script>
<script>
  // Menu side toggle
$('document').ready(function(){
  $('button.navbar-toggle').click(function(){
    var navbar_obj = $($(this).data("target"));
    navbar_obj.toggleClass("open");
  });
});
</script>
  <!--
    <script>
  document.addEventListener('DOMContentLoaded', function () {
  const sidebar = document.getElementById('sidebar');
  const mainContent = document.getElementById('main-content');
  const toggleSidebarBtn = document.getElementById('toggle-sidebar');
  const collapseStates = JSON.parse(localStorage.getItem('collapseStates')) || {};
  const sidebarState = localStorage.getItem('sidebarState');

  // Set initial collapse states for acordeons
  for (const collapseId in collapseStates) {
    const collapse = document.getElementById(collapseId);
    if (collapseStates[collapseId]) {
      collapse.classList.add('show');
    }
  }

  // Toggle sidebar visibility based on stored state
  if (sidebarState === 'hidden') {
    sidebar.classList.add('d-none');
    mainContent.classList.remove('col');
    mainContent.classList.add('col-12');
  } else {
    sidebar.classList.remove('d-none');
    mainContent.classList.remove('col-12');
    mainContent.classList.add('col');
  }

  // Toggle sidebar visibility
  toggleSidebarBtn.addEventListener('click', function () {
    if (sidebar.classList.contains('d-none')) {
      sidebar.classList.remove('d-none');
      mainContent.classList.remove('col-12');
      mainContent.classList.add('col');
      localStorage.setItem('sidebarState', 'visible');
    } else {
      sidebar.classList.add('d-none');
      mainContent.classList.remove('col');
      mainContent.classList.add('col-12');
      localStorage.setItem('sidebarState', 'hidden');
    }
  });

  // Save collapse states on toggle
  const accordionItems = document.querySelectorAll('.accordion-item');
  accordionItems.forEach(item => {
    item.addEventListener('click', function () {
      const collapseId = this.querySelector('.accordion-collapse').id;
      const isExpanded = this.querySelector('.accordion-collapse').classList.contains('show');
      collapseStates[collapseId] = isExpanded;
      localStorage.setItem('collapseStates', JSON.stringify(collapseStates));
    });
  });

  // Toggle dark mode
  const darkModeToggleBtn = document.getElementById('dark-mode-toggle');
  const body = document.body;

  darkModeToggleBtn.addEventListener('click', function () {
    body.classList.toggle('dark-mode');
  });
});

  </script>
  -->
</head>

<body>

  {% include 'inc/header.html' %}



  <div class="container-fluid">
    <div class="row">

      <!-- Sidebar
      <div class="col-2 bg-light" id="sidebar">
        {% include 'inc/sidebar.html' %}
      </div>
       -->
      <!-- /Sidebar -->


      <!-- Main Content -->
      <div class="col" id="main-content">
        <div class="p-0">
          {% include 'inc/breadcrumbs.html' %}

          <div id="container">
            {% include 'inc/flashmsg.html' %}
            {% block content %}
            {% endblock %}
          </div>
        </div>

        {% include 'inc/footer.html' %}

      </div>
      <!-- /Main Content -->
    </div>
  </div>
  <!--
  <script src="{{ url_for('static', filename='bootstrap.bundle.min.js')}}"></script>
  -->


  {% include 'inc/scripts.html' %}



</body>

</html>